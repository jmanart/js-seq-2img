<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>JS Sequence to Image</title>

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>

    <!-- Bootstrap -->
		<!-- Latest compiled and minified CSS -->
		<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
		<!-- Optional theme -->
		<!--<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap-theme.min.css">-->
		<!-- Latest compiled and minified JavaScript -->
		<script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>

    <script src="http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.6.0/underscore-min.js"></script>

    <link href="css/jsseq.css" rel="stylesheet">

    <script src="js/raphael-min.js"></script>
    <script src="js/sequence-diagram-min.js"></script>
    <script src="js/saveSvgAsPng.js"></script>

    <script>


        $(function(){
//            $('#diagram_text').keypress(function(event) {
//                // Check the keyCode and if the user pressed Enter (code = 13)
//                if (event.keyCode == 13) {
//                    try {
//                        diagram = Diagram.parse($('#diagram_text').val());
//                        diagram.drawSVG("diagram", {theme: 'hand'});
//                    } catch (err){
//                        console.log("Whatever .... " + err);
//                    }
//                }
//            });
            $('#refresh_diagram').click(function(){
                $("#diagram").children().remove();
                diagram = Diagram.parse($('#diagram_text').val());
                diagram.drawSVG("diagram", {theme: 'simple'});
            });

            $('#download_file').click(function(){
                saveSvgAsPng($('#diagram').children()[0], $('#filename').val());
            });

            $('#diagram_text').keydown(function(event) {
                if((event.ctrlKey || event.metaKey) && event.which == 82) {
                    $('#refresh_diagram').click();
                    event.preventDefault();
                    return false;
                }
                return true;
            });
        });
    </script>
</head>
<body>

<div class="container">
    <div class="row uprow">
        <div class="col-md-4">
            <div class="btn-toolbar" role="toolbar">
                <div class="btn-group">
                    <button type="button" class="btn btn-default btnleft" id="refresh_diagram">
                        <span class="glyphicon glyphicon-refresh"></span>
                    </button>
                </div>
            </div>
        </div>
        <div class="col-md-8">
            <div class="btn-toolbar" role="toolbar">
                <div class="btn-group">
                    <button type="button" class="btn btn-default btnright" id="download_file">
                        <span class="glyphicon glyphicon-file"></span>
                    </button>
                    <input type="text" id="filename" name="filename" placeholder="Enter file name">
                </div>
            </div>
        </div>

    </div>

    <div class="row downrow">
        <div class="col-md-4"><textarea id="diagram_text" placeholder="Describe diagram in here"></textarea></div>
        <div class="col-md-8">
            <div id="diagram"></div>
        </div>
    </div>
</div>






</body>
</html>


<!--TabTags->TabActivity: onTagSearch()-->
<!--TabActivity->FragmentManager: SendFragment()-->
<!--FragmentManager->TabActivity: tabFragment-->
<!--TabActivity->tabFragment: gotoSearchViewAndSearch-->
<!--tabFragment->FragmentManager: beginTransaction()-->
<!--FragmentManager->TabSearch: new()-->
<!--TabSearch->TabSearch: getInitialContext()-->
<!--TabSearch->TabSearch: searchContent()-->
<!--tabFragment->TabTags: transaction-->
<!--TabTags->TabTags: onAttach()-->
<!--TabTags->TabTags: addToListeners()-->
